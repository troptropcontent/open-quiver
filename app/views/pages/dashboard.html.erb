<div class="container">
  <h1>Hello <%= @user.first_name %> !</h1>
  <br>

  <!-- Here is the list of the ongoing reservations -->
  <h2>You have <%= @user.reservations.count %> reservation(s) :</h2>

  <ul>
    <% @user.reservations.each do |reservation| %>
      <div class="card-dashboard">
        <%= cl_image_tag reservation.board.photo.key, height: 300, width: 400, crop: :fill %>
        <div class="card-dashboard-infos">
          <h2> You have booked <%= reservation.board.name %></h2>
          <p> from <strong><%= reservation.start_date.to_formatted_s(:long_ordinal) %></strong> to <strong><%= reservation.end_date.to_formatted_s(:long_ordinal) %></strong>.</p>
          <p><%= link_to "Cancel my reservation", reservation_path(reservation), method: :delete, data: { confirm: "Are you sure?" } %></p>
        </div>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Leave a review</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Leave a review</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= render 'reviews/new', reservation: reservation %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
      </div>
    <% end %>
  </ul>

<!-- Here is the list of the ongoing listings -->

  <h2>You have <%= @user.boards.count %> ongoing listing(s) :</h2>

  <ul>
    <% @user.boards.each do |board| %>
      <div class="card-dashboard">
        <%= cl_image_tag board.board.photo.key, height: 300, width: 400, crop: :fill %>
        <div class="card-dashboard-infos">
          <h2> You have booked <%= board.board.name %></h2>
          <p> from <%= board.start_date.strftime("%M/%D/%Y") %> to <%= board.end_date.strftime %>.</p>
        </div>
      </div>
    <% end %>
  </ul>
</div>


